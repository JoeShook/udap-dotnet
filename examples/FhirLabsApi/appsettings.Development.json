{
  //"Kestrel": {
  //  "Certificates": {
  //    "Default": {
  //      "Path": "../../_tests/Udap.PKI.Generator/certstores/Kestrel/FhirLabs/fhirlabs.net.pfx",
  //      "Password": "udap-test"
  //    }
  //  }
  //}

  "Jwt": {
    "Authority": "https://host.docker.internal:5002",
    "RequireHttpsMetadata": false
  },

  "UdapMetadataOptions": {
    "Enabled": true,
    "UdapMetadataConfigs": [
      {
        "Community": "udap://fhirlabs1/",
        "SignedMetadataConfig": {
          "AuthorizationEndPoint": "https://host.docker.internal:5002/connect/authorize",
          "TokenEndpoint": "https://host.docker.internal:5002/connect/token",
          "RegistrationEndpoint": "https://host.docker.internal:5002/connect/register"
        }
      },

      {
        "Community": "udap://fhirlabs2/",
        "SignedMetadataConfig": {
          "RegistrationSigningAlgorithms": [ "RS384", "RS256" ],
          "TokenSigningAlgorithms": [ "RS256", "RS384" ],
          "AuthorizationEndPoint": "https://securedcontrols.net:5002/connect/authorize",
          "TokenEndpoint": "https://securedcontrols.net:5002/connect/token",
          "RegistrationEndpoint": "https://securedcontrols.net:5002/connect/register"
        }
      },

      {
        "Community": "udap://Untrusted/",
        "SignedMetadataConfig": {
          "AuthorizationEndPoint": "https://securedcontrols.net:5002/connect/authorize",
          "TokenEndpoint": "https://securedcontrols.net:5002/connect/token",
          "RegistrationEndpoint": "https://securedcontrols.net:5002/connect/register"
        }
      },

      {
        "Community": "udap://IssMismatchToSubjAltName/",
        "SignedMetadataConfig": {
          "Issuer": "http://localhost/fhir/r4",
          "Subject": "http://localhost/fhir/r4",
          "AuthorizationEndPoint": "https://securedcontrols.net:5002/connect/authorize",
          "TokenEndpoint": "https://securedcontrols.net:5002/connect/token",
          "RegistrationEndpoint": "https://securedcontrols.net:5002/connect/register"
        }
      },

      {
        "Community": "udap://IssMismatchToBaseUrl/",
        "SignedMetadataConfig": {
          "Issuer": "http://localhost/IssMismatchToBaseUrl/r4",
          "Subject": "http://localhost/IssMismatchToBaseUrl/r4",
          "AuthorizationEndPoint": "https://securedcontrols.net:5002/connect/authorize",
          "TokenEndpoint": "https://securedcontrols.net:5002/connect/token",
          "RegistrationEndpoint": "https://securedcontrols.net:5002/connect/register"
        }
      },

      {
        "Community": "udap://ECDSA/",
        "SignedMetadataConfig": {
          "RegistrationSigningAlgorithms": [ "ES384" ],
          "TokenSigningAlgorithms": [ "ES384" ],
          "Issuer": "http://localhost/fhir/r4",
          "Subject": "http://localhost/fhir/r4",
          "AuthorizationEndPoint": "https://securedcontrols.net:5002/connect/authorize",
          "TokenEndpoint": "https://securedcontrols.net:5002/connect/token",
          "RegistrationEndpoint": "https://securedcontrols.net:5002/connect/register"
        }
      }
    ]
  },


  /* Put someplace safer like secrets.json or secured database 
  and add this to Program.cs

  builder.Services.Configure<UdapFileCertStoreManifest>(builder.Configuration.GetSection("UdapFileCertStoreManifest"));
  builder.Services.AddSingleton<ICertificateStore>(sp =>
    new FileCertificateStore(sp.GetRequiredService<IOptionsMonitor<UdapFileCertStoreManifest>>(), "FhirLabsApi"));
  */

  "UdapFileCertStoreManifest": {
    "ResourceServers": [
      {
        "Name": "FhirLabsApi",
        "Communities": [
          {
            "Name": "udap://fhirlabs1/",
            "IssuedCerts": [
              {
                "FilePath": "CertStore/issued/fhirLabsApiClientLocalhostCert.pfx",
                "Password": "udap-test"
              }
            ]
          },
          {
            "Name": "udap://fhirlabs2/",
            "IssuedCerts": [
              {
                "FilePath": "CertStore/issued/fhirLabsApiClientLocalhostCert2.pfx",
                "Password": "udap-test"
              }
            ]
          },
          {
            "Name": "udap://Untrusted/",
            "IssuedCerts": [
              {
                "FilePath": "CertStore/issued/fhirLabsApiClientLocalhostCert3.pfx",
                "Password": "udap-test"
              }
            ]
          },
          {
            "Name": "udap://IssMismatchToSubjAltName/",
            "IssuedCerts": [
              {
                "FilePath": "CertStore/issued/fhirLabsApiClientLocalhostCert4.pfx",
                "Password": "udap-test"
              }
            ]
          },
          {
            "Name": "udap://IssMismatchToBaseUrl/",
            "IssuedCerts": [
              {
                "FilePath": "CertStore/issued/fhirLabsApiClientLocalhostCert5.pfx",
                "Password": "udap-test"
              }
            ]
          },
          {
            "Name": "udap://ECDSA/",
            "IssuedCerts": [
              {
                "FilePath": "CertStore/issued/fhirLabsApiClientLocalhostCert6_ECDSA.pfx",
                "Password": "udap-test"
              }
            ]
          }
        ]
      }
    ]
  }
}