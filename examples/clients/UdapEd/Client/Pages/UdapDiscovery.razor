@page "/udapDiscovery"
@using Udap.Client.Internal

<ErrorBoundary @ref="ErrorBoundary">
  <ChildContent>
    <MudGrid Class="mt-4">
      <MudItem xs="12" sm="12" md="12">
        <MudText Typo="Typo.h4">Udap Metadata</MudText>
      </MudItem>
      <MudItem xs="12" sm="12" md="12">
        <MudButton Class="mt-3"
                   ButtonType="ButtonType.Button"
                   Variant="Variant.Filled"
                   OnClick="GetMetadata">Query</MudButton>
        <MudSpacer />
        <MudTextField Label=@($"Enter BaseUrl")
                      AutoFocus="true"
                      HelperText=@($"UDAP Metadata URL: {GetWellKnownUdap(BaseUrl)}")
                      InputType="InputType.Text"
                      @bind-Value:get="BaseUrl"
                      @bind-Value:set="SetMetadataUrlProperty" />
        
        <MudSpacer />
        <pre>@Result</pre>
        <MudSpacer />
      </MudItem>
    </MudGrid>


  </ChildContent>
  <ErrorContent Context="ex">
    <pre class="blazor-error-boundary">
            @ex.Message
      </pre>
  </ErrorContent>
</ErrorBoundary>